<!doctype html>
<dom-module id="app-main">
  <link rel="stylesheet" href="app-main.css">
  <link rel="import" href="../../elements/menu-panel/menu-panel.html">
  <link rel="import" href="../../elements/login-form/login-form.html">
  <link rel="import" href="../../elements/add-item-form/add-item-form.html">
  <link rel="import" href="../../elements/search-bar/search-bar.html">

  <template>



      <paper-header-panel condenses keep-condensed-header main>
          <paper-toolbar class="medium">
            <div class="spacer"></div>
            <paper-icon-button icon="add" data-dialog="add-item-modal" id="add-item-button" alt="Add new"></paper-icon-button>
            <paper-icon-button icon="more-vert" alt="More options"></paper-icon-button>
            <paper-icon-button icon="account-circle" data-dialog="login-modal" title="Login" id="login-button" alt="Login"></paper-icon-button>
          </paper-toolbar>

          <login-form></login-form>

          <add-item-form></add-item-form>
        <search-bar></search-bar>

      </paper-header-panel>
  </template>
  <script>
    Polymer({
      is: "app-main",
      listeners: {
        'login-button.click': 'modalBtnClickHandler',
        'add-item-button.click': 'modalBtnClickHandler'
      },
      modalBtnClickHandler: function(e){
        var button = e.target;
        while (!button.hasAttribute('data-dialog') && button !== document.body) {
          button = button.parentElement;
        }
        if (!button.hasAttribute('data-dialog')) {
          return;
        }
        var id = button.getAttribute('data-dialog');
        var dialog = document.getElementById(id);
        if (dialog) {
          dialog.open();
        }
      }
    });
  </script>
</dom-module>
