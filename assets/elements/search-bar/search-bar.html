<!doctype html>
<dom-module id="search-bar">
		<template>
		<style>
		 :host {
			 display: block;
			 @apply(--paper-font-common-base);
		 }
		 app-header {
			 position: fixed;
			 top: 0;
			 left: 0;
			 right: 0;
			 z-index: 1;
			 background-color: #4285f4;
			 color: white;
		 }
		 iron-list {
			 margin-top: 90px;
			 padding-bottom: 16px;
		 }
		 .photoContent {
			 @apply(--layout);
			 background-color: #ddd;
			 position: relative;
			 width: 300px;
			 height: 300px;
			 margin: 8px;
		 }
		 .photoContent:hover .detail{
			 opacity: 1;
		 }
		 .photoContent > iron-image {
			 @apply(--layout-flex);
		 }
		 .photoContent > .detail {
			 position: absolute;
			 bottom: 0;
			 left: 0;
			 right: 0;
			 background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 100%);
			 color: white;
			 font-size: 20px;
			 font-weight: 100;
			 padding: 20px;
			 opacity: 0;
			 transition: opacity 0.1s;
		 }
		 .searchInput {
			 @apply(--layout-flex);
			 font-size: 18px;
			 padding: 10px 20px;
			 border: none;
			 background-color: rgba(255, 255, 255, 0.2);
			 color: white;
			 -webkit-appearance: none;
			 border-radius: 0px;
		 }
		 .searchInput:hover {
			 background-color: rgba(255, 255, 255, 0.3);
		 }
		 .searchInput:focus {
			 background-color: white;
			 outline: none;
			 color: black;
		 }
		 .loadingIndicator {
			 font-size: 16px;
			 text-align: center;
			 height: 60px;
		 }
		 .loadingIndicator paper-spinner {
			 margin-right: 20px;
			 vertical-align: middle;
		 }
		 @media (max-width: 800px) {
			 .photoContainer {
				 width: calc(50% - 16px);
			 }
			 .photoContent {
				 width: auto;
			 }
		 }
		 @media (max-width: 400px) {
			 iron-list {
				 margin-top: 72px;
			 }
			 .photoContainer {
				 width: 100%;
			 }
			 .photoContent > .detail {
				 opacity: 1;
			 }
		 }
		 ::-webkit-input-placeholder {
			 color: rgba(255, 255, 255, 0.5);
		 }
		 ::-moz-placeholder {
			 color: rgba(255, 255, 255, 0.5);
		 }
		 :-ms-input-placeholder {
			 color: rgba(255, 255, 255, 0.5);
		 }
		 ::-ms-input-placeholder {
			 color: rgba(255, 255, 255, 0.5);
		 }
	 </style>
			<iron-ajax url="/advert/list" last-response="{{data}}" auto></iron-ajax>
			<paper-search-panel
				placeholder="Search ..."
				hide-filter-button="[[hideFilterButton]]"
				search="{{search}}"
				count="{{count}}"
				items="{{data}}"
				has-more="[[hasMore]]"
				loading="[[loading]]"
				filters="[[filters]]"
				selected-filters="{{selectedFilters}}"
				on-change-request-params="loadData">
			</paper-search-panel>
			<iron-list items="[[data]]" as="item" grid>
				<template>
					<div class="photoContainer">
            <div class="photoContent" tabindex$="[[tabIndex]]">
              <iron-image sizing="cover"
                  src="[[item.image]]">
              </iron-image>
              <div class="detail">[[item.title]]</div>
            </div>
          </div>
				</template>
			</iron-list>
		</template>

		<script>
      Polymer({
        is: "search-bar",
				open : function() {
					this.$.dialog.open();
				},
				loadData : function() {
					// Simulate a 100ms data load
					this.loading = true;
					setTimeout(function() {
						this.loading = false;
					}.bind(this), 1000);
				},
				properties : {
					hasMore : true,
					selectedFilters : {
						age: [ "teenager", "adult" ],
						gender: [ "male" ]
					},
					filters : [
						{
							id: "age",
							name: "Age",
							values: [
								{
									id: "child",
									name: "0-12",
									count: 29
								},
								{
									id: "teenager",
									name: "13-19",
									count: 8
								},
								{
									id: "adult",
									name: "20+",
									count: 63
								}
							]
						},
						{
							id: "gender",
							name: "Gender",
							values: [
								{
									id: "female",
									name: "Female"
								},
								{
									id: "male",
									name: "Male"
								}
							]
						}
					]
				}

      });
		</script>
</dom-module>
